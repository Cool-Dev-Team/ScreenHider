<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Key Generator and Authenticator</title>
    <style>
        body { font-family: Arial, sans-serif; display: flex; justify-content: center; align-items: center; flex-direction: column; gap: 20px; padding: 20px; }
        .container { border: 1px solid #ccc; padding: 20px; border-radius: 8px; width: 350px; }
        .page { display: none; } /* Initially hide all page sections */
        .page.active { display: flex; justify-content: center; align-items: center; flex-direction: column; } /* Show the active page */
        input[type="text"] { width: calc(100% - 22px); padding: 10px; margin-top: 5px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; }
        button { padding: 10px 15px; background-color: #007BFF; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background-color: #0056b3; }
        #keyOutput, #authResult { margin-top: 15px; padding: 10px; border-radius: 4px; word-wrap: break-word; }
        .success-message { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; padding: 20px; text-align: center; }
        .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background-color: #e2e3e5; color: #383d41; border: 1px solid #d6d8db; }
    </style>
</head>
<body>

    <!-- Main Authentication Page -->
    <div id="authPage" class="page active">
        <div class="container">
            <h2>Key Generator</h2>
            <p>Enter a name to generate a unique key.</p>
            <label for="generatorName">Name:</label>
            <input type="text" id="generatorName">
            <button onclick="generateKey()">Generate Key</button>
            <div id="keyOutput" class="info" style="display: none;"></div>
        </div>
        <div class="container">
            <h2>Authentication</h2>
            <p>Enter your name and key to authenticate.</p>
            <label for="authName">Name:</label>
            <input type="text" id="authName">
            <label for="authKey">Key:</label>
            <input type="text" id="authKey">
            <button onclick="authenticate()">Authenticate</button>
            <div id="authResult"></div>
        </div>
    </div>

    <!-- Success Page -->
    <div id="successPage" class="page">
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <h2>about:blank SCREEN HIDER</h2>
        <p>SOME URLS DONT WORK!!!!!!!!!!!!!</p>
        <input type="text" value="https://fischy6734.github.io/BM/" placeholder="https://fischy6734.github.io/BM/" id='input' autofocus>
        <button onclick='create()'>Create!</button>
        
        <script>
        function create() {
            var url = document.getElementById('input').value;
            var win = window.open();
            win.document.body.style.margin = '0';
            win.document.body.style.height = '100vh';
            var iframe = win.document.createElement('iframe');
            iframe.style.border = 'none';
            iframe.style.width = '100%';
            iframe.style.height = '100%';
            iframe.style.margin = '0';
            iframe.src = url;
            win.document.body.appendChild(iframe);
        }
        <\/script>
    </body>
</html>`;
        
        const blob = new Blob([blobContent], { type: 'text/html' });
        const url = URL.createObjectURL(blob);
        window.location.replace(url);
    </script>
</head>
<body>
</body>
</html>
    </div>

    <script>
        // Use a standard, robust hashing algorithm. This one implements SHA-256.
        async function sha256(message) {
            const msgBuffer = new TextEncoder().encode(message);
            const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
            return hashHex;
        }

        async function generateKey() {
            const name = document.getElementById('generatorName').value;
            if (!name) {
                alert("Please enter a name.");
                return;
            }
            const key = await sha256(name);
            const keyOutputDiv = document.getElementById('keyOutput');
            keyOutputDiv.textContent = 'Generated Key: ' + key;
            keyOutputDiv.style.display = 'block';
        }

        async function authenticate() {
            const name = document.getElementById('authName').value;
            const key = document.getElementById('authKey').value;
            const authResultDiv = document.getElementById('authResult');

            if (!name || !key) {
                authResultDiv.className = 'error';
                authResultDiv.textContent = 'Please enter both name and key.';
                return;
            }

            const expectedKey = await sha256(name);

            if (key === expectedKey) {
                authResultDiv.className = 'success';
                authResultDiv.textContent = 'Success! Showing success page...';
                
                // Hide the auth page and show the success page
                setTimeout(() => {
                    document.getElementById('authPage').classList.remove('active');
                    document.getElementById('successPage').classList.add('active');
                }, 1500); // 1.5 second delay
            } else {
                authResultDiv.className = 'error';
                authResultDiv.textContent = 'Naaa, you didn\'t put in the right code or something like that.';
            }
        }
    </script>
</body>
</html>
